<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Godot Tilemap Format &mdash; G4 Loader 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="G4 Loader 0.1.0 documentation" href="../index.html" />
    <link rel="up" title="Editor manual" href="index.html" />
    <link rel="prev" title="Godot TSCN File Format" href="godot_scene.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="unity-to-godot"></span><div class="section" id="godot-tilemap-format">
<h1>Godot Tilemap Format<a class="headerlink" href="#godot-tilemap-format" title="Permalink to this headline">¶</a></h1>
<p>Tilemap is a type of TSCN Node2D. For a TSCN Node description,
see <cite>Godot Doc: TSCN File Format&lt;https://docs.godotengine.org/en/latest/development/file_formats/tscn.html&gt;</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Data format here is try and figured out from TSCN file, only for resource handling
in loader, not for implementation reference.</p>
</div>
<p>TileMap in TSCN file example:</p>
<dl class="docutils">
<dt>::</dt>
<dd><p class="first">[ext_resource path=&#8221;<a class="reference external" href="res://autoset.tres">res://autoset.tres</a>&#8221; type=&#8221;TileSet&#8221; id=1]
[ext_resource path=&#8221;<a class="reference external" href="res://tset1.tres">res://tset1.tres</a>&#8221; type=&#8221;TileSet&#8221; id=2]</p>
<p class="last">[node name=&#8221;TileMap&#8221; type=&#8221;TileMap&#8221; parent=&#8221;.&#8221;]
visible = false
scale = Vector2( 0.25, 0.25 )
tile_set = ExtResource( 2 )
cell_size = Vector2( 128, 128 )
cell_quadrant_size = 8
format = 1
tile_data = PoolIntArray( 0, 1, 0, 1, 1073741824, 0, 2, 0, 0, 3, 1610612736, 0, 65536, 1, 0 )</p>
</dd>
</dl>
<div class="section" id="tile-date">
<h2>tile_date<a class="headerlink" href="#tile-date" title="Permalink to this headline">¶</a></h2>
<p>TileMap is handled by</p>
<dl class="docutils">
<dt>::</dt>
<dd>class TileMap : public Node2D</dd>
</dl>
<p>see GodotEngin/scene/2d/tile_map.h.</p>
<p>C struct for tile:</p>
<dl class="docutils">
<dt>::</dt>
<dd><dl class="first docutils">
<dt>union PosKey {</dt>
<dd><dl class="first docutils">
<dt>struct {</dt>
<dd>int16_t x;
int16_t y;</dd>
</dl>
<p class="last">};
uint32_t key;</p>
</dd>
</dl>
<p>};</p>
<dl class="docutils">
<dt>union Cell {</dt>
<dd><dl class="first docutils">
<dt>struct {</dt>
<dd>int32_t id : 24;
bool flip_h : 1;
bool flip_v : 1;
bool transpose : 1;
int16_t autotile_coord_x : 16;
int16_t autotile_coord_y : 16;</dd>
</dl>
<p>};</p>
<p class="last">uint64_t _u64t;
Cell() { _u64t = 0; }</p>
</dd>
</dl>
<p class="last">};</p>
</dd>
</dl>
<p>A 1D 32 bits int array in decimal digital string.</p>
<img alt="../_images/001-tilemap1.png" src="../_images/001-tilemap1.png" />
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="33%" />
<col width="25%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Node Data</th>
<th class="head">Data Formatted</th>
<th class="head" colspan="2">Remarks</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tile_set = ExtResource( 2 )</td>
<td>ExtResource(2) = tset1.tres</td>
<td colspan="2">Tileset</td>
</tr>
<tr class="row-odd"><td>PoolIntArray[0:2]
0, 1, 0</td>
<td>0: [x: 0, y: 0] - PosKey
1: [id: 1]      - Cell.struct.id
0: [auto-x: 0, auto-y: 0] -Cell.struct.autox/y</td>
<td colspan="2">Postion: x, y = 0, 0
Tileset&#8217;s tile id: 1
Cell&#8217;s auto tile id x, y = 0, 0</td>
</tr>
<tr class="row-even"><td>PoolIntArray[3:5]
1, 1073741824, 0</td>
<td><p class="first">0: [x: 1, y: 0] - PosKey
1: [id: 0]      - Cell.struct.id</p>
<blockquote>
<div>[fliph: 0, flipv: 1]</div></blockquote>
<p class="last">0: [auto-x: 0, auto-y: 0]</p>
</td>
<td colspan="2">Postion: x, y = 1, 0
Tileset&#8217;s tile id = 0  ( 1073741824 = 4000 0000h )
flip (x/h, y/v) = 0, 1 ( Why not 04h? )</td>
</tr>
<tr class="row-odd"><td>...</td>
<td>1610612736
65536</td>
<td colspan="2">6000 0000h: id, h, v = 0, 1, 1 ?
65536: pos(x, y) = 0, 1</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Godot Tilemap Format</a><ul>
<li><a class="reference internal" href="#tile-date">tile_date</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Editor manual</a><ul>
      <li>Previous: <a href="godot_scene.html" title="previous chapter">Godot TSCN File Format</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/grammar/godot_tilemap.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Odys Zhou.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="../_sources/grammar/godot_tilemap.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>